<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>D2M-R Lectures &amp; Materials</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-c0367b04c37547644fece4185067e4a7.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">D2M-R Lectures &amp; Materials</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Placeholder index page for viewing class lecture slides. Most of these are just the template with updated yaml. Q1W1 and Q1W6 currently have some draft content. Some content might render incorrectly (lists, injected html and bootstrap) because of resized tabs.</p>
<section id="slides" class="level2">
<h2 class="anchored" data-anchor-id="slides">Slides</h2>
<ul>
<li><a href="theme/template.html">Template</a></li>
<li>Quarter 1
<ul>
<li><a href="quarter-1/Q1-W1_introduction.html">Week 1: Introduction to D2M-R Q1</a></li>
<li><a href="quarter-1/Q1-W2_rstudio.html">Week 2: RStudio IDE</a></li>
<li><a href="quarter-1/Q1-W3_github.html">Week 3: Git &amp; GitHub</a></li>
<li><a href="quarter-1/Q1-W4_R-Language.html">Week 4: R Language</a></li>
<li><a href="quarter-1/Q1-W6_tidyverse.html">Week 6: The Tidyverse</a></li>
<li><a href="quarter-1/Q1-W7_tv-data-types.html">Week 7: Data Types in the Tidyverse</a></li>
<li><a href="quarter-1/Q1-W8_reporting.html">Week 8: Basic Data Reporting</a></li>
</ul></li>
<li>Quarter 2
<ul>
<li><a href="quarter-2/Q2-W1_intro-to-q2.html">Week 1: Introduction to D2M-R Q1</a></li>
<li><a href="quarter-2/Q2-W2_quarto.html">Week 2: Quarto Publishing System</a></li>
<li><a href="quarter-2/Q2-W3_apaquarto.html">Week 3: apaquarto Extension</a></li>
<li><a href="quarter-2/Q2-W4_ggplot2.html">Week 4: Intro to ggplot2</a></li>
<li><a href="quarter-2/Q2-W5_data-analysis.html">Week 5: Data Analysis</a></li>
<li><a href="quarter-2/Q2-W6_publication-figures.html">Week 6: Publication-ready Data Visualization</a></li>
<li><a href="quarter-2/Q2-W7_publication-data.html">Week 7: Publication-ready Analysis Reporting</a></li>
<li><a href="quarter-2/Q2-W8_citations.html">Week 8: Citations &amp; Bibliographies</a></li>
<li><a href="quarter-2/Q2-W9_workflow.html">Week 9: The D2M-R Workflow</a></li>
</ul></li>
</ul>
</section>
<section id="class-topics" class="level2">
<h2 class="anchored" data-anchor-id="class-topics">Class topics</h2>
<p>This is a detailed outline of topics covered in the book, which is based on slide content from previous years. The slides don’t need to go in depth on all of these, but should cover the most important pieces and at least briefly touch on the existence of everything else.</p>
<section id="quarter-1" class="level3">
<h3 class="anchored" data-anchor-id="quarter-1">Quarter 1</h3>
<ol type="1">
<li>Introduction
<ol type="1">
<li>PSYC 30550 D2MR - Overview
<ol type="1">
<li>The class itself - link to course page</li>
<li>Assessment structure</li>
</ol></li>
<li>D2MR Workflow</li>
<li>This book
<ol type="1">
<li>The goals</li>
<li>How to use it</li>
<li>How to contribute</li>
</ol></li>
<li>Getting Started/Setting up (in the form of walking through a dummy repo)
<ol type="1">
<li>Download and install R and RStudio</li>
<li>Get familiar with RStudio</li>
<li>R Notebooks
<ol start="4" type="1">
<li>Preview quarto</li>
</ol></li>
<li>Get Git</li>
<li>Connect RStudio to GitHub</li>
</ol></li>
<li>(Optional) Set up Copilot in RStudio</li>
</ol></li>
<li>Solving Problems
<ol type="1">
<li>Introduction - why this is a whole section’</li>
<li>Using AI</li>
<li>Best practices - keep your code:
<ol type="1">
<li>Standardized</li>
<li>Intelligible</li>
<li>Maintainable</li>
<li>Contextualized</li>
</ol></li>
<li>Debugging &amp; Troubleshooting
<ol type="1">
<li>Documentation
<ol type="1">
<li>Help/lookup functions</li>
<li>Function documentation</li>
<li>Package documentation</li>
<li>Resources</li>
</ol></li>
<li>Solving your own problems
<ol type="1">
<li>Error messages</li>
<li>Garbage in, garbage out (and other tropes)</li>
<li>Line-by-line debugging</li>
<li>Rubber ducking</li>
</ol></li>
<li>Ask the internet
<ol type="1">
<li>Start strong - asking good questions</li>
<li>Crowdsource</li>
<li>Use AI constructively</li>
</ol></li>
<li>Ask humans – for D2MR Students
<ol type="1">
<li>Ask your classmates</li>
<li>Use Slack</li>
<li>Ask your instructor &amp; TAs</li>
<li>The D2MR troubleshooting process</li>
</ol></li>
<li>Starting from “Nothing”</li>
</ol></li>
</ol></li>
<li>RStudio Essentials
<ol type="1">
<li>RStudio
<ol type="1">
<li>Overview + what’s an IDE</li>
<li>Layout
<ol type="1">
<li>Source pane</li>
<li>Console pane</li>
<li>The rest of the panes
<ol type="1">
<li>Environment</li>
<li>History</li>
<li>Files</li>
<li>Plots</li>
<li>Connections</li>
<li>Packages</li>
<li>Help</li>
<li>Build</li>
<li>VCS</li>
<li>Tutorial</li>
<li>Viewer</li>
<li>Presentations</li>
</ol></li>
</ol></li>
</ol></li>
<li>Keyboard shortcuts</li>
<li>Customizing RStudio</li>
<li>File types - just a preview, we’ll cover these in more detail later!
<ol type="1">
<li>.Rmd</li>
<li>.qmd</li>
<li>.R</li>
<li>.Rproj</li>
<li>Lots of metadata files you can mostly ignore (including literally in your .gitignore)
<ol type="1">
<li>.Rhistory</li>
<li>.RData</li>
<li>.Rprofile</li>
<li>.Rproj.user</li>
</ol></li>
</ol></li>
</ol></li>
<li>Git &amp; GitHub Essentials
<ol type="1">
<li>Introduction – the point of version control</li>
<li>Git
<ol type="1">
<li>Overview &amp; workflow musts</li>
<li>Git lingo
<ol type="1">
<li>Repositories
<ol type="1">
<li>repository / repo</li>
<li>initialize</li>
<li>clone</li>
<li>branch &amp; checkout</li>
</ol></li>
<li>Version control
<ol type="1">
<li>commit</li>
<li>stage</li>
<li>fetch</li>
<li>pull</li>
<li>push</li>
</ol></li>
<li>Merging
<ol type="1">
<li>diff</li>
<li>merge</li>
<li>merge conflict</li>
<li>rebase</li>
<li>fast-forward (ff)</li>
<li>squash</li>
<li>cherry-pick</li>
<li>stash</li>
</ol></li>
<li>Remote repositories
<ol type="1">
<li>remote</li>
<li>origin</li>
<li>upstream</li>
<li>fork</li>
<li>pull request</li>
</ol></li>
<li>(Optional) Using Git in the terminal</li>
</ol></li>
</ol></li>
<li>Repo structure
<ol type="1">
<li>What does and does not go in a repo?</li>
<li>Top-level essentials
<ol type="1">
<li>README</li>
<li>.gitignore</li>
</ol></li>
<li>The rest of your stuff</li>
<li>Metadata and information</li>
</ol></li>
<li>GitHub
<ol type="1">
<li>What is GitHub? How is it different from Git?</li>
<li>GitHub features
<ol type="1">
<li>Issues</li>
<li>Pull requests</li>
<li>Pages</li>
<li>Copilot</li>
<li>More
<ol type="1">
<li>Actions</li>
<li>Projects</li>
<li>Codespaces</li>
</ol></li>
</ol></li>
<li>Interfacing with GitHub (without RStudio)
<ol type="1">
<li>GitHub website</li>
<li>GitHub Desktop</li>
<li>Other options
<ol type="1">
<li>VS Code and other IDEs</li>
<li>GitHub CLI</li>
</ol></li>
</ol></li>
<li>Interfacing with GitHub in RStudio
<ol type="1">
<li>Connecting RStudio to GitHub</li>
<li>Using GitHub in RStudio
<ol type="1">
<li>Cloning a repo</li>
<li>Committing changes</li>
<li>Pushing changes</li>
<li>Pulling changes</li>
<li>Creating pull requests</li>
</ol></li>
</ol></li>
</ol></li>
<li>Git Pains
<ol type="1">
<li>Common issues</li>
<li>Helpful resources</li>
<li>The nuclear option</li>
</ol></li>
</ol></li>
<li>R Language Essentials
<ol type="1">
<li>Introduction
<ol type="1">
<li>What is R and why use it?</li>
<li>Object-oriented programming</li>
</ol></li>
<li>R syntax
<ol type="1">
<li>Variables</li>
<li>Functions</li>
<li>Data types</li>
<li>Operators</li>
</ol></li>
<li>R data structures
<ol type="1">
<li>Vectors</li>
<li>Lists</li>
<li>Matrices</li>
<li>Data frames</li>
<li>Tibbles</li>
</ol></li>
<li>R packages
<ol type="1">
<li>What are packages?</li>
<li>Installing and loading packages</li>
<li>Same function, different packages, oh no!
<ol type="1">
<li>Functions with different names in different packages that all do the same thing</li>
<li>Functions with the same name in different packages that do different things</li>
</ol></li>
<li>Commonly used packages in D2MR</li>
</ol></li>
</ol></li>
<li>R Programming
<ol type="1">
<li>Essential concepts in base R
<ol type="1">
<li>Object assignment
<ol type="1">
<li>Creating dummy variables and dataframes</li>
</ol></li>
<li>Indexing and subsetting with [] &amp; $</li>
<li>(more base R essentials)</li>
</ol></li>
<li>Iteration
<ol type="1">
<li>Conditional statements
<ol type="1">
<li>if else</li>
<li>case_when</li>
</ol></li>
<li>Loops
<ol type="1">
<li>for loops</li>
<li>while loops</li>
</ol></li>
</ol></li>
<li>Functions in R
<ol type="1">
<li>Writing functions</li>
<li>Function arguments and return values</li>
<li>Scope and environments</li>
</ol></li>
<li>Regular expressions
<ol type="1">
<li>What is regex? What’s the point?</li>
<li>Basic syntax</li>
<li>Common use cases</li>
</ol></li>
</ol></li>
<li>Welcome to the Tidyverse!
<ol type="1">
<li>Introduction to the Tidyverse &amp; tidy data
<ol type="1">
<li>Overview of the tidy ecosystem</li>
<li>Tidy data principles</li>
<li>Core packages in the Tidyverse and general functions</li>
<li>Terminology</li>
</ol></li>
<li>Importing and exporting with readr
<ol type="1">
<li>Overview
<ol type="1">
<li>Tabular data - what counts?
<ol type="1">
<li>File types</li>
<li>R objects, including tibbles</li>
</ol></li>
<li>Reading, writing, rereading (intermediate datasets)</li>
</ol></li>
<li>Reading data with read_* functions</li>
<li>Writing data with write_* functions</li>
<li>Other packages
<ol type="1">
<li>readxl for Excel files</li>
<li>haven for SPSS, SAS, and Stata files</li>
<li>googlesheets4 for Google Sheets</li>
<li>jsonlite for JSON files</li>
<li>DBI and dbplyr for databases</li>
</ol></li>
<li>Handling common import/export issues</li>
</ol></li>
<li>Data manipulation with dplyr
<ol type="1">
<li>Introduction to dplyr
<ol type="1">
<li>the points of pipelines (highly readable, but verbose)</li>
<li>The pipe operator (%&gt;%) and magrittr</li>
<li>Chaining operations with pipes</li>
</ol></li>
<li>Selecting data
<ol type="1">
<li>select, rename</li>
<li>filter</li>
<li>arrange</li>
</ol></li>
<li>Manipulating data
<ol type="1">
<li>mutate</li>
<li>summarize</li>
<li>group_by</li>
<li>distinct</li>
<li>count</li>
</ol></li>
<li>dplyr practice</li>
</ol></li>
<li>Data tidying with tidyr
<ol type="1">
<li>What counts as “tidying” data?
<ol type="1">
<li>Remember what “tidy” means in the tidyverse</li>
<li>Tidying is reshaping and systematically cleaning data</li>
</ol></li>
<li>Reshape data
<ol type="1">
<li>pivot_longer</li>
<li>pivot_wider</li>
<li>cast, melt, gather, spread, etc.</li>
</ol></li>
<li>Combine and split cells
<ol type="1">
<li>unite</li>
<li>separate functions</li>
</ol></li>
<li>Expand tables
<ol type="1">
<li>expand</li>
<li>complete</li>
</ol></li>
<li>Handle missing values
<ol type="1">
<li>drop_na</li>
<li>fill</li>
<li>replace_na</li>
</ol></li>
<li>Advanced: Nested data
<ol type="1">
<li>What is nested data and why might you use it?</li>
<li>We’re not going to cover this in D2MR, but tidyr has functions for creating, reshaping, and transforming nested data</li>
</ol></li>
</ol></li>
</ol></li>
<li>Working with different data types in the tidyverse
<ol type="1">
<li>Why specialized packages exist for text, factors, and dates
<ol type="1">
<li>Base R can do this stuff, but it’s not always great</li>
<li>Tidyverse functions are useful:
<ol type="1">
<li>Consistent syntax</li>
<li>More intuitive functions</li>
<li>More intuitive pattern matching (stringr)</li>
<li>Seamlessly compatible with dplyr, tidyr, and the rest of the tidyverse</li>
</ol></li>
</ol></li>
<li>Text data with stringr
<ol type="1">
<li>Overview
<ol type="1">
<li>Remember what strings and character vectors are?</li>
<li>Remember what regex is?</li>
<li>Special things about strings (using quotes, escaping characters, etc.)</li>
<li>Base R can do string stuff - Useful base R string functions
<ol type="1">
<li>paste &amp; paste0</li>
<li>c</li>
<li>toupper, tolower</li>
<li>is.character</li>
<li>toString</li>
<li>Pattern matching with grep family</li>
</ol></li>
</ol></li>
<li>Match strings
<ol type="1">
<li>str_detect</li>
<li>str_starts</li>
<li>str_ends</li>
<li>str_count</li>
</ol></li>
<li>Subsetting and length
<ol type="1">
<li>str_sub</li>
<li>str_subset</li>
<li>str_length</li>
<li>str_pad</li>
<li>str_trunc</li>
<li>str_trim</li>
</ol></li>
<li>Mutate, join, split
<ol type="1">
<li>str_sub (again)</li>
<li>str_replace, str_replace_all</li>
<li>str_remove, str_remove_all</li>
<li>str_to_lower, str_to_upper, str_to_title</li>
<li>str_split</li>
<li>str_c, str_glue</li>
<li>str_flatten</li>
</ol></li>
</ol></li>
<li>Factors with forcats
<ol type="1">
<li>Overview
<ol type="1">
<li>What are factors?</li>
<li>They look like strings, how are they different? Why do we have to have a whole separate package for them?
<ol type="1">
<li>Levels</li>
<li>Order</li>
<li>Closed set</li>
</ol></li>
</ol></li>
<li>Base R can do factor stuff (and unlike with strings, you’ll use these base R factor functions a lot!)
<ol type="1">
<li>factor</li>
<li>levels</li>
<li>relevel</li>
<li>other base factor functions are mostly variations on these</li>
</ol></li>
<li>Useful forcats functions
<ol type="1">
<li>fct_relevel</li>
<li>fct_reorder</li>
<li>fct_rev</li>
<li>fct_recode</li>
<li>fct_collapse</li>
<li>fct_other</li>
<li>fct_drop</li>
<li>fct_expand</li>
</ol></li>
</ol></li>
<li>Dates and times with lubridate <!-- I don't use lubridate much and it wasn't in the original d2mr, so this is just a possible list of things to cover suggested by copilot -->
<ol type="1">
<li>Overview
<ol type="1">
<li>What are dates and times?</li>
<li>Why do we need a whole package for them?</li>
<li>Base R can do date and time stuff, but it’s not great
<ol type="1">
<li>as.Date</li>
<li>as.POSIXct</li>
<li>as.POSIXlt</li>
<li>strptime</li>
</ol></li>
</ol></li>
<li>lubridate functions
<ol type="1">
<li>Parsing dates and times
<ol type="1">
<li>ymd, mdy, dmy, ymd_hms, etc.</li>
<li>parse_date_time</li>
</ol></li>
<li>Extracting components
<ol type="1">
<li>year, month, day, hour, minute, second</li>
<li>wday, yday, mday</li>
</ol></li>
<li>Manipulating dates and times
<ol type="1">
<li>%m+% and %m-% for adding and subtracting time</li>
<li>interval and duration</li>
<li>floor_date, ceiling_date, round_date</li>
</ol></li>
<li>Formatting dates and times
<ol type="1">
<li>format</li>
<li>strftime</li>
</ol></li>
</ol></li>
</ol></li>
</ol></li>
<li>Basic visualization and summary statistics
<ol type="1">
<li>This chapter is not the ggplot2 chapter or a deep stats chapter. It’s a connection between the two quarters of the class.</li>
<li>Putting things together
<ol type="1">
<li>how data manipulation in the tidyverse leads to easier visualization</li>
<li>how visualization leads to better understanding of your data</li>
<li>how visualization and summary statistics fit together</li>
</ol></li>
<li>Distributions of continuous variables
<ol type="1">
<li>Histograms</li>
<li>Box plots</li>
<li>Summary statistics: mean, median, variance, standard deviation</li>
</ol></li>
<li>Comparing groups
<ol type="1">
<li>Bar plots</li>
<li>Summary statistics: grouped means, medians, etc.</li>
<li>t-tests</li>
<li>More advanced for later: ANOVA, chi-squared tests</li>
</ol></li>
<li>Relationships between continuous variables
<ol type="1">
<li>Scatter plots and smoothing lines</li>
<li>Correlation</li>
<li>Basic linear regression</li>
<li>More advanced for later: Multiple regression, logistic regression</li>
</ol></li>
</ol></li>
<li>Midpoint review</li>
</ol>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>